(this["webpackJsonpshop-price"]=this["webpackJsonpshop-price"]||[]).push([[0],{176:function(e,t,a){e.exports=a(422)},181:function(e,t,a){},256:function(e,t,a){},334:function(e,t,a){},339:function(e,t,a){},340:function(e){e.exports=JSON.parse('{"city":[{"label":"\u897f\u5b89","value":1},{"label":"\u90d1\u5dde","value":1},{"label":"\u6210\u90fd","value":1.1},{"label":"\u5e7f\u5dde","value":1.35}],"type":[{"label":"\u7092\u83dc","value":1},{"label":"\u706b\u9505\u5355\u54c1","value":0.9},{"label":"\u706b\u9505\u7efc\u5408","value":1},{"label":"\u7efc\u5408\u6dae\u70e4\u81ea\u52a9\u9910","value":1.3},{"label":"\u5e26\u660e\u6863\u53cc\u540e\u53a8\u7092\u83dc","value":1.15},{"label":"\u7f8e\u98df\u5e7f\u573a\uff08\u542b\u6863\u53e3\uff09","value":1.2},{"label":"\u70e4\u8089\u7092\u83dc\u7efc\u5408","value":1.05},{"label":"\u7efc\u5408\u897f\u9910\u5385","value":1},{"label":"\u5355\u4e3b\u54c1\u81ea\u52a9\uff08\u725b\u6392\u81ea\u52a9\uff09","value":1.1},{"label":"\u9762\u70b9\u5c0f\u5403\u7c7b\u7efc\u5408","value":0.95},{"label":"\u5355\u54c1\u4e2d\u9910","value":0.9},{"label":"\u7efc\u5408\u6027\u5bb4\u4f1a\u9910\u996e","value":0.9},{"label":"\u70e4\u8089\u5355\u54c1\uff08\u70e4\u9c7c\uff09","value":0.9},{"label":"\u9762\u70b9\u5c0f\u5403\u7c7b\u5355\u54c1","value":0.9},{"label":"\u897f\u5f0f\u5feb\u9910","value":0.9},{"label":"\u7f8e\u98df\u5e7f\u573a\uff08\u4e0d\u542b\u6863\u53e3\uff09","value":0.75},{"label":"\u519c\u5bb6\u4e50\uff08500\u5e73\u4ee5\u4e0a\uff09","value":0.75},{"label":"\u56e2\u9910\uff081000\u5e73\u4ee5\u4e0a\uff09","value":0.6},{"label":"\u8336\u697c\u5496\u5561\u7b80\u9910","value":0.8},{"label":"\u7eaf\u5bb4\u4f1a\u5385","value":0.8}]}')},341:function(e,t,a){},348:function(e,t,a){},422:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),l=a.n(i),c=(a(181),a(122),a(72)),o=a.n(c),s=(a(95),a(42)),u=a.n(s),m=(a(62),a(26)),d=a.n(m),p=(a(96),a(43)),f=a.n(p),h=(a(136),a(32)),v=a.n(h),b=(a(35),a(13)),g=a.n(b),y=(a(242),a(37)),E=a.n(y),k=(a(63),a(27)),w=a.n(k),x=(a(99),a(15)),O=a.n(x),S=a(21),j=a.n(S),C=a(46),I=a(28),D=a(29),N=a(31),z=a(30),P=(a(256),a(45));function q(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null==e)return"";var a=[];for(var n in e)a.push(n+"="+(t?encodeURIComponent(e[n]):e[n]));return a.join("&")}function F(e){return"number"===typeof e&&!isNaN(e)}var _={openid:"",getOpenid:function(){return this.openid},login:function(){var e=this;return Object(C.a)(j.a.mark((function t(){var a,n,r,i,l,c,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.getOpenid()){t.next=2;break}return t.abrupt("return",e.getUserInfo(e.getOpenid()));case 2:if(a=e.getQueryVariable("code"),n=window.location.href,a){t.next=10;break}"wx364a8470a58b03ed",r=encodeURIComponent(n),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat("wx364a8470a58b03ed","&redirect_uri=").concat(r,"&response_type=code&scope=snsapi_base&state=#wechat_redirect"),t.next=27;break;case 10:if(i=e.getLocationParam("url"),l=e.getLocationParam("code"),!i){t.next=15;break}return window.location=i+"?code="+l,t.abrupt("return");case 15:return t.prev=15,t.next=18,V("/getopenid",{code:l});case 18:return c=t.sent,o=c.openid,e.openid=o,t.abrupt("return",e.getUserInfo(o));case 24:t.prev=24,t.t0=t.catch(15),window.location="/";case 27:case"end":return t.stop()}}),t,null,[[15,24]])})))()},getLocationParam:function(e){var t=new RegExp("(^|&|/?)"+e+"=([^&]*)(&|$)"),a=window.location.search.match(t);return null!==a?decodeURIComponent(a[2]):null},getUserInfo:function(e){return Object(C.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(C.a)(j.a.mark((function t(a,n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V("/userinfo",{openid:e});case 3:return r=t.sent,t.abrupt("return",a(r));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",n(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()},getQueryVariable:function(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]===e)return n[1]}return!1}};function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=B(t),R(fetch("/api/webchat"+e+"?"+q(t),{mode:"cors"}))}function M(e,t){return t=B(t),R(fetch("/api/webchat"+e,{method:"POST",mode:"cors",body:t}))}function R(e){return new Promise((function(t,a){e.then((function(e){return e.json()})).then((function(e){return 200===e.code?t(e.data):a(e.msg)}))}))}function B(e){var t=_.getOpenid();return t&&(e.append?e.append("openid",t):e.openid=t),e}a(334);var T=function(e){Object(N.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={see:!1},e.clickCounter=0,e.timer=void 0,e}return Object(D.a)(a,[{key:"handleIconClick",value:function(){var e=this;this.props.isSaler&&(this.clickCounter++,this.clickCounter>=3?w.a.alert("\u6210\u4ea4\u5e95\u4ef7",this.props.floor+"\u5143/\u6708"):this.timer=setTimeout((function(){clearTimeout(e.timer),e.clickCounter=0}),500))}},{key:"handleSeeClick",value:function(){this.setState({see:!this.state.see})}},{key:"render",value:function(){var e=this.props,t=e.cost,a=e.offer,n=e.onClose,i=e.isSaler,l=this.state.see;return r.a.createElement("div",{className:"resultPage"},r.a.createElement("div",{className:"result iconfont icon-dui",onClick:this.handleIconClick.bind(this)}),r.a.createElement("div",{className:"item"},"\u60a8\u597d\uff0c\u6839\u636e\u60a8\u7684\u7ecf\u8425\u60c5\u51b5\uff0c\u62a5\u4ef7\u5982\u4e0b"),r.a.createElement("div",{className:"item"},r.a.createElement(A,{price:a})),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"see iconfont ".concat(l?"icon-ziyuan":"icon-ziyuan1")}),r.a.createElement("div",{className:"item",onClick:this.handleSeeClick.bind(this)},l&&"\u6218\u7565\u4f19\u4f34\u4f18\u60e0\u4ef7"),r.a.createElement("div",{className:"item",style:{alignItems:"flex-start"}},l&&r.a.createElement(A,{price:t}))),r.a.createElement(f.a,{size:"lg"}),r.a.createElement(u.a,null,r.a.createElement(d.a,{type:"primary",onClick:function(e){return n(e)}},"\u91cd\u65b0\u8be2\u4ef7")))}}]),a}(r.a.Component);function A(e){return r.a.createElement("span",{className:"price-label"},r.a.createElement("span",{className:"price"},e.price),"\u5143/\u6708")}a(335);var H=a(166),K=a.n(H);a(339);function U(e){var t=e.title,a=e.visible,n=e.onClose,i=e.dataSource,l=e.value,c=e.onOk;return r.a.createElement(w.a,{visible:a,title:t,transparent:!0,onClose:n},r.a.createElement(g.a,{style:{maxHeight:"300px"}},i.map((function(e){return r.a.createElement(K.a,{key:e.label,checked:l===e.value,onChange:function(){return c(e),void n()},className:"modal-picker-item-radio"},r.a.createElement("span",{style:{color:"#666"}},e.label))}))))}var J=a(340),L=function(e){Object(N.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,codeDisabled:!1,codeBtnText:"\u83b7\u53d6\u9a8c\u8bc1\u7801",hasSendMsg:!1,priecs:{},showResult:!1,isSaler:!1,validPhone:!1,categoryVisible:!1,cityVisible:!1},e.typeData=J.type.map((function(e){return{label:e.label,value:e}})),e.cityData=J.city.map((function(e){return{label:e.label,value:e}})),e}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),_.login().then(function(){var t=Object(C.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!1,validPhone:0===a.auth_mobile,isSaler:"sale"===a.type});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){O.a.fail(t),e.setState({loading:!1})}))}},{key:"submit",value:function(){var e=this;this.props.form.validateFields().then((function(t){t.mouth_sales_volume=1e4*t.mouth_sales_volume;var a=function(e,t,a,n,r){var i=0,l=0,c=0,o=0,s=1,u=1;return!(e<50)&&(e<100?(i=(e/60*200+150)*(t/3*.15+.85)*(a/e/1700*.1+.9),s=1.18,u=1.25):e<200?(i=(e/170*300+300)*(t/3*.15+.85)*(a/e/1400*.1+.9),s=1.15,u=1.2):e<400?(i=(e/290*450+350)*(t/3*.15+.85)*(a/e/1300*.1+.9),s=1.15,u=1.2):e<800?(i=(e/550*800+350)*(t/3*.15+.85)*(a/e/1100*.1+.9),s=1.12,u=1.15):e<1400?(i=(e/1100*1300+500)*(t/3*.15+.85)*(a/e/1e3*.1+.9),s=1.1,u=1.12):e<2300?(i=(e/1800*1500+1e3)*(t/3*.15+.85)*(a/e/900*.1+.9),s=1.1,u=1.12):e<=3500&&(i=(e/2800*2300+1300)*(t/4*.15+.85)*(a/e/900*.1+.9),s=1.1,u=1.12),e>=400&&1.1===r&&(r=1.05),e>=400&&1.35===r&&(r=1.3),o=(c=(l=i*n*r)*s)*u,{floor:l.toFixed(0),cost:c.toFixed(0),offer:o.toFixed(0)})}(t.area,t.year_limit,t.mouth_sales_volume,t.category[0].value,t.city[0].value);e.setState({priecs:a}),t.min_reserve_price=a.floor,t.reserve_price=a.cost,t.offer_price=a.offer,t.city=t.city[0].label,t.category=t.category[0].label;var n=new FormData;Object.keys(t).map((function(e){n.append(e,t[e])})),e.setState({loading:!0}),M("/offer",n).then((function(t){e.setState({loading:!1}),e.showResult()}),(function(t){e.setState({loading:!1}),console.log(t),O.a.fail(t)}))}),(function(t){var a=t.errors;for(var n in a){O.a.fail(e.props.form.getFieldError(n)[0],1,null,!1);break}}))}},{key:"getCode",value:function(){var e=this;if(this.state.codeDisabled)return!1;var t=this.props.form.getFieldValue("mobile");t?(this.setState({codeDisabled:!0}),V("/smscode",{mobile:t}).then((function(){e.setState({hasSendMsg:!0});var t=60,a=setInterval((function(){if(0===t)return e.setState({codeBtnText:"\u91cd\u53d1\u9a8c\u8bc1",codeDisabled:!1}),void clearInterval(a);e.setState({codeBtnText:"".concat(t,"\u79d2\u540e\u91cd\u65b0\u83b7\u53d6")}),t--}),1e3);O.a.success("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001",1)}),(function(t){console.log(t),w.a.alert("",t),e.setState({codeDisabled:!1})}))):O.a.fail("\u8bf7\u8f93\u5165\u624b\u673a\u53f7",2,null,!1)}},{key:"showResult",value:function(){this.setState({showResult:!0})}},{key:"closeResult",value:function(){this.setState({showResult:!1})}},{key:"numberNormalize",value:function(e){var t=Number(e);return""!==e&&F(t)?t:e}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldProps,n=t.getFieldValue,i=t.setFieldsValue,l=this.state,c=l.showResult,s=l.priecs,m=l.isSaler,p=l.validPhone,h=l.loading,b=l.categoryVisible,y=l.cityVisible;return r.a.createElement("form",{className:"mainPage","aria-hidden":y||b},r.a.createElement(g.a,{renderHeader:function(){return"\u5e97\u94fa\u4fe1\u606f"}},r.a.createElement(E.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u9762\u79ef"},a("area",{validateTrigger:"onBlur",normalize:function(t){return e.numberNormalize(t)},rules:[{required:!0,type:"number",min:50,max:3500,message:"\u9762\u79ef\u4e3a50\u52303500\u4e4b\u95f4\u7684\u6574\u6570"}]}),{extra:"\u5e73\u65b9\u7c73"}),"\u9762\u79ef"),r.a.createElement(E.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u5e74\u9650"},a("year_limit",{normalize:function(t){return e.numberNormalize(t)},rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5e74\u9650"}]}),{extra:"\u5e74"}),"\u5e74\u9650"),r.a.createElement(E.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u6708\u9500\u552e\u989d"},a("mouth_sales_volume",{normalize:function(t){return e.numberNormalize(t)},rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6708\u9500\u552e\u989d"}]}),{extra:"\u4e07\u5143"}),"\u6708\u9500\u552e\u989d"),r.a.createElement(v.a,Object.assign({},a("category",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u54c1\u7c7b"}]}),{data:this.typeData,cols:1,title:"\u9009\u62e9\u54c1\u7c7b",extra:"\u8bf7\u9009\u62e9",disabled:!0}),r.a.createElement(g.a.Item,{arrow:"horizontal",onClick:function(){e.setState({categoryVisible:!0})}},"\u9009\u62e9\u54c1\u7c7b")),r.a.createElement(v.a,Object.assign({},a("city",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u57ce\u5e02"}]}),{data:this.cityData,cols:1,title:"\u9009\u62e9\u57ce\u5e02",extra:"\u8bf7\u9009\u62e9",disabled:!0}),r.a.createElement(g.a.Item,{arrow:"horizontal",onClick:function(){return e.setState({cityVisible:!0})}},"\u6240\u5728\u57ce\u5e02"))),p&&r.a.createElement(g.a,{renderHeader:function(){return"\u7528\u6237\u4fe1\u606f"}},r.a.createElement(E.a,Object.assign({maxLength:4,editable:!0,placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"},a("name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8054\u7cfb\u4eba"}]})),"\u8054\u7cfb\u4eba"),r.a.createElement(E.a,Object.assign({type:"number",maxLength:11,editable:!0,placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"},a("mobile",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u624b\u673a\u53f7"}]})),"\u624b\u673a\u53f7"),r.a.createElement(E.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"},a("code",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u9a8c\u8bc1\u7801"}]}),{extra:r.a.createElement("span",{className:"btn_code ".concat(this.state.codeDisabled&&"disabled"),onClick:this.getCode.bind(this)},this.state.codeBtnText)}),"\u9a8c\u8bc1\u7801")),r.a.createElement(f.a,{size:"xl"}),r.a.createElement(u.a,null,r.a.createElement(d.a,{type:"primary",onClick:this.submit.bind(this)},"\u67e5\u8be2")),c&&r.a.createElement(T,Object.assign({},s,{isSaler:m,onClose:this.closeResult.bind(this)})),r.a.createElement(o.a,{toast:!0,text:"\u6b63\u5728\u52a0\u8f7d...",animating:h}),r.a.createElement(U,{title:"\u70b9\u51fb\u9009\u62e9\u54c1\u7c7b",visible:b,onClose:function(){e.setState({categoryVisible:!1})},dataSource:this.typeData,value:n("category")&&n("category")[0],onOk:function(e){i({category:[e.value]})}}),r.a.createElement(U,{title:"\u70b9\u51fb\u9009\u62e9\u57ce\u5e02",visible:y,onClose:function(){e.setState({cityVisible:!1})},dataSource:this.cityData,value:n("city")&&n("city")[0],onOk:function(e){i({city:[e.value]})}}))}}]),a}(r.a.Component),Q=Object(P.a)()(L),W=(a(341),a(168)),$=Object(W.a)(),G=function(e){Object(N.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,citys:[],devices:[],parts:[],standards:[]},e.fetchCityData=function(){V("/parts/query/cities.json").then((function(t){e.setState({citys:e.array2pickerData(t)})}))},e.fetchDevicesData=function(t){V("/parts/query/devices.json",{city:t}).then((function(t){e.setState({devices:e.array2pickerData(t)})}))},e.fetchPartsData=function(t){V("/parts/query/parts.json",{city:e.props.form.getFieldValue("city"),device:t}).then((function(t){e.setState({parts:e.array2pickerData(t)})}))},e.fetchStandardsData=function(t){V("/parts/query/standards.json",{city:e.props.form.getFieldValue("city"),device:e.props.form.getFieldValue("device"),part:t}).then((function(t){e.setState({standards:e.array2pickerData(t)})}))},e.handleCityChange=function(t){e.fetchDevicesData(t)},e.handledeviceChange=function(t){e.fetchPartsData(t)},e.handlePartsChange=function(t){e.fetchStandardsData(t)},e}return Object(D.a)(a,[{key:"componentDidMount",value:function(){this.fetchCityData()}},{key:"array2pickerData",value:function(e){return e.map((function(e){return{value:e,label:e}}))}},{key:"submit",value:function(){var e=this;this.props.form.validateFields().then((function(e){console.log("form valid success",JSON.stringify(e)),$.push({pathname:"/parts/result",state:e})}),(function(t){var a=t.errors;for(var n in a){O.a.fail(e.props.form.getFieldError(n)[0],1,null,!1);break}}))}},{key:"numberNormalize",value:function(e){var t=Number(e);return""!==e&&F(t)?t:e}},{key:"render",value:function(){var e=this.props.form.getFieldProps,t=this.state,a=t.loading,n=t.citys,i=t.devices,l=t.parts,c=t.standards;return r.a.createElement("form",{className:"mainPage"},r.a.createElement(g.a,{renderHeader:function(){return"\u914d\u4ef6\u67e5\u8be2"}},r.a.createElement(v.a,Object.assign({},e("city",{onChange:this.handleCityChange,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u57ce\u5e02"}]}),{data:n,cols:1,title:"\u9009\u62e9\u57ce\u5e02",extra:"\u8bf7\u9009\u62e9"}),r.a.createElement(g.a.Item,{arrow:"horizontal"},"\u57ce\u5e02")),r.a.createElement(v.a,Object.assign({},e("device",{onChange:this.handledeviceChange,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8bbe\u5907"}]}),{data:i,cols:1,title:"\u9009\u62e9\u8bbe\u5907",extra:"\u8bf7\u9009\u62e9"}),r.a.createElement(g.a.Item,{arrow:"horizontal"},"\u8bbe\u5907\u540d\u79f0")),r.a.createElement(v.a,Object.assign({},e("part",{onChange:this.handlePartsChange,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u914d\u4ef6"}]}),{data:l,cols:1,title:"\u9009\u62e9\u914d\u4ef6",extra:"\u8bf7\u9009\u62e9"}),r.a.createElement(g.a.Item,{arrow:"horizontal"},"\u914d\u4ef6\u540d\u79f0")),r.a.createElement(v.a,Object.assign({},e("standard",{initialValue:""}),{data:c,cols:1,title:"\u9009\u62e9\u89c4\u683c",extra:"\u8bf7\u9009\u62e9"}),r.a.createElement(g.a.Item,{arrow:"horizontal"},"\u89c4\u683c"))),r.a.createElement(f.a,{size:"xl"}),r.a.createElement(u.a,null,r.a.createElement(d.a,{type:"primary",onClick:this.submit.bind(this)},"\u7acb\u5373\u67e5\u8be2")),r.a.createElement(o.a,{toast:!0,text:"\u6b63\u5728\u52a0\u8f7d...",animating:a}))}}]),a}(r.a.Component),X=Object(P.a)()(G),Y=(a(342),a(115)),Z=a.n(Y),ee=(a(344),a(47)),te=a.n(ee),ae=(a(348),a(113)),ne=a(79);function re(e){var t=Object.assign({},e);return console.log(t.images),r.a.createElement(ne.b,null,t.lightboxIsOpen?r.a.createElement(ne.a,{onClose:t.toggleModal},r.a.createElement(ne.c,{currentIndex:t.selectedIndex,views:t.images})):null)}var ie=Object(P.a)()(function(e){Object(N.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={result:JSON.parse('{"city":["\u4e0a\u6d77"],"device":["\u8bbe\u59071"],"part":["\u914d\u4ef61"]}'),list:[],modalVisiable:!1,id:null,activeItemKey:null,imgPath:""},e.yiyi=function(t){t===e.state.activeItemKey?e.setState({activeItemKey:null}):e.setState({activeItemKey:t})},e.yiyiModal=function(t){e.setState({modalVisiable:!0,id:t.id,activeItemKey:null})},e.submit=function(){e.props.form.validateFields().then((function(t){var a=new FormData;a.append("partId",e.state.id),a.append("comment",t.comment),a.append("contact",t.contact),M("/parts/objection/add.json",a).then((function(){e.closeModal(),O.a.success("\u63d0\u4ea4\u6210\u529f")}),(function(e){console.log(e),O.a.fail(e)}))}),(function(t){var a=t.errors;for(var n in a){O.a.fail(e.props.form.getFieldError(n)[0],1,null,!1);break}}))},e.closeModal=function(){e.setState({modalVisiable:!1},(function(){e.props.form.resetFields()}))},e.preview=function(t,a){t.stopPropagation(),e.setState({imgPath:"https://zwbgzhapi.zhaodaka.net"+a})},e}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.result;if(t){var a=new FormData;Object.keys(t).map((function(e){a.append(e,t[e])})),this.setState({loading:!0}),M("/parts/query.json",a).then((function(t){e.setState({loading:!1,list:t})}),(function(t){e.setState({loading:!1}),console.log(t),O.a.fail(t)}))}else this.requery()}},{key:"requery",value:function(){$.push("/parts")}},{key:"render",value:function(){var e=this,t=this.state,a=t.result,n=t.list,i=t.modalVisiable,l=t.activeItemKey,c=t.imgPath,o=this.props.form.getFieldProps;return a?r.a.createElement("div",{className:"parts-result"},r.a.createElement(g.a,null,r.a.createElement(g.a.Item,null,r.a.createElement("span",null,"\u67e5\u8be2\u7ed3\u679c"),r.a.createElement(ae.Brief,null,r.a.createElement(te.a,null,r.a.createElement(te.a.Item,{className:"result-title"},r.a.createElement("div",null,a.city," > ",a.device," > ",a.part,a.standard&&r.a.createElement("span",null," > ",a.standard))),r.a.createElement(d.a,{type:"primary",size:"small",onClick:this.requery},"\u91cd\u65b0\u8be2\u4ef7"))))),r.a.createElement(g.a,{renderHeader:r.a.createElement(le,null)},n.map((function(t){return r.a.createElement("div",{className:"swipe-wrap ".concat(l===t.id?"active":"")},r.a.createElement(g.a.Item,{className:"swipe-cover",key:t.id,onClick:function(){return e.yiyi(t.id)},extra:r.a.createElement(ce,{data:t})},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("span",{style:{overflow:"hidden",textOverflow:"ellipsis"}},t.device_name,"-",t.part_name,t.standard&&r.a.createElement("span",null,"-",t.standard)),t.image&&r.a.createElement("i",{onClick:function(a){return e.preview(a,t.image)},className:"iconfont icon-tupian"}))),r.a.createElement("div",{className:"swipe-content",onClick:function(){return e.yiyiModal(t)}},r.a.createElement("div",null,"\u5f02\u8bae")))}))),r.a.createElement(w.a,{transparent:!0,title:"\u63d0\u51fa\u5f02\u8bae",visible:i,footer:[{text:"\u53d6\u6d88",onPress:this.closeModal},{text:"\u786e\u8ba4",onPress:this.submit}]},r.a.createElement(g.a,{className:"modal-list"},r.a.createElement(Z.a,Object.assign({autoHeight:!0,style:{fontSize:"14px"},placeholder:"\u60a8\u5bf9\u4ef7\u683c\u7684\u610f\u89c1"},o("comment",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u610f\u89c1"}]}))),r.a.createElement(Z.a,Object.assign({autoHeight:!0,style:{fontSize:"14px"},placeholder:"\u7559\u4e0b\u60a8\u7684\u8054\u7cfb\u65b9\u5f0f\uff0c\u7535\u8bdd+\u59d3\u540d"},o("contact",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8054\u7cfb\u65b9\u5f0f"}]}))))),r.a.createElement(re,{lightboxIsOpen:!!c,toggleModal:function(){return e.setState({imgPath:""})},selectedIndex:0,images:[{source:c}]})):null}}]),a}(r.a.Component));function le(){return r.a.createElement(te.a,null,r.a.createElement(te.a.Item,{style:{flex:1}},"\u540d\u79f0"),r.a.createElement(te.a.Item,{style:{textAlign:"right"}},"\u4ef7\u683c\u533a\u95f4 ",r.a.createElement("div",{style:{display:"inline-block",width:"50px"}},"\u5355\u4f4d")))}function ce(e){return r.a.createElement("div",{style:{textAlign:"right"}},e.data.price,r.a.createElement("div",{style:{display:"inline-block",width:"35px"}},e.data.unit))}var oe=a(427);var se=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(oe.b,{history:$},r.a.createElement(oe.c,null,r.a.createElement(oe.a,{exact:!0,path:"/",component:Q}),r.a.createElement(oe.a,{exact:!0,path:"/parts",component:X}),r.a.createElement(oe.a,{exact:!0,path:"/parts/result",component:ie}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(421);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[176,1,2]]]);
//# sourceMappingURL=main.40c7d242.chunk.js.map