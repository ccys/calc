(this["webpackJsonpshop-price"]=this["webpackJsonpshop-price"]||[]).push([[0],{116:function(e,t,a){e.exports=a(282)},121:function(e,t,a){},200:function(e,t,a){},280:function(e,t,a){},281:function(e){e.exports=JSON.parse('{"city":[{"label":"\u897f\u5b89","value":1},{"label":"\u90d1\u5dde","value":1},{"label":"\u6210\u90fd","value":1.1}],"type":[{"label":"\u7efc\u5408\u6dae\u70e4\u81ea\u52a9\u9910","value":1.3},{"label":"\u5e26\u660e\u6863\u53cc\u540e\u53a8\u7092\u83dc","value":1.15},{"label":"\u7f8e\u98df\u5e7f\u573a\uff08\u542b\u6863\u53e3\uff09","value":1.2},{"label":"\u70e4\u8089\u7092\u83dc\u7efc\u5408","value":1.05},{"label":"\u7efc\u5408\u897f\u9910\u5385","value":1},{"label":"\u7092\u83dc","value":1},{"label":"\u5355\u4e3b\u54c1\u81ea\u52a9\uff08\u725b\u6392\u81ea\u52a9\uff09","value":1.1},{"label":"\u706b\u9505\u7efc\u5408","value":1},{"label":"\u9762\u70b9\u5c0f\u5403\u7c7b\u7efc\u5408","value":0.95},{"label":"\u5355\u54c1\u4e2d\u9910","value":0.9},{"label":"\u7efc\u5408\u6027\u5bb4\u4f1a\u9910\u996e","value":0.9},{"label":"\u70e4\u8089\u5355\u54c1\uff08\u70e4\u9c7c\uff09","value":0.9},{"label":"\u9762\u70b9\u5c0f\u5403\u7c7b\u5355\u54c1","value":0.9},{"label":"\u897f\u5f0f\u5feb\u9910","value":0.9},{"label":"\u7f8e\u98df\u5e7f\u573a\uff08\u4e0d\u542b\u6863\u53e3\uff09","value":0.75},{"label":"\u519c\u5bb6\u4e50\uff08500\u5e73\u4ee5\u4e0a\uff09","value":0.75},{"label":"\u706b\u9505\u5355\u54c1","value":0.9},{"label":"\u56e2\u9910\uff081000\u5e73\u4ee5\u4e0a\uff09","value":0.6},{"label":"\u8336\u697c\u5496\u5561\u7b80\u9910","value":0.8},{"label":"\u7eaf\u5bb4\u4f1a\u5385","value":0.8}]}')},282:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),l=a.n(i),o=(a(121),a(122),a(110)),c=a.n(o),s=(a(92),a(47)),u=a.n(s),m=(a(93),a(48)),d=a.n(m),p=(a(96),a(49)),f=a.n(p),h=(a(168),a(80)),b=a.n(h),v=(a(102),a(34)),g=a.n(v),y=(a(185),a(22)),w=a.n(y),E=(a(104),a(51)),k=a.n(E),x=(a(197),a(29)),S=a.n(x),O=a(15),j=a.n(O),C=a(28),N=a(53),_=a(54),z=a(56),D=a(55),I=(a(200),a(115));var q={openid:"",getOpenid:function(){return"oPKdSwC58K57Mskin6hDQUJdSLqs"},login:function(){var e=this;return Object(C.a)(j.a.mark((function t(){var a,n,r,i,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.getOpenid()){t.next=2;break}return t.abrupt("return",e.getUserInfo(e.getOpenid()));case 2:if(a=e.getQueryVariable("code"),n=window.location.href,a){t.next=10;break}"wx364a8470a58b03ed",r=encodeURIComponent(n),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat("wx364a8470a58b03ed","&redirect_uri=").concat(r,"&response_type=code&scope=snsapi_base&state=#wechat_redirect"),t.next=22;break;case 10:return t.prev=10,t.next=13,P("/getopenid",{code:a});case 13:return i=t.sent,l=i.openid,e.openid=l,t.abrupt("return",e.getUserInfo(l));case 19:t.prev=19,t.t0=t.catch(10),window.location="/";case 22:case"end":return t.stop()}}),t,null,[[10,19]])})))()},getUserInfo:function(e){return Object(C.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(C.a)(j.a.mark((function t(a,n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P("/userinfo",{openid:e});case 3:return r=t.sent,t.abrupt("return",a(r));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",n(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()},getQueryVariable:function(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]===e)return n[1]}return!1}};function P(e,t){return t=F(t),R(fetch("/api/webchat"+e+"?"+function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null==e)return"";var a=[];for(var n in e)a.push(n+"="+(t?encodeURIComponent(e[n]):e[n]));return a.join("&")}(t),{mode:"cors"}))}function R(e){return new Promise((function(t,a){e.then((function(e){return e.json()})).then((function(e){return 200===e.code?t(e.data):a(e.msg)}))}))}function F(e){var t=q.getOpenid();return t&&(e.append?e.append("openid",t):e.openid=t),e}a(280);var T=function(e){Object(z.a)(a,e);var t=Object(D.a)(a);function a(){var e;Object(N.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={see:!1},e.clickCounter=0,e.timer=void 0,e}return Object(_.a)(a,[{key:"handleIconClick",value:function(){var e=this;this.props.isSaler&&(this.clickCounter++,this.clickCounter>=3?k.a.alert("\u6210\u4ea4\u5e95\u4ef7",this.props.floor+"\u5143/\u6708"):this.timer=setTimeout((function(){clearTimeout(e.timer),e.clickCounter=0}),500))}},{key:"handleSeeClick",value:function(){this.setState({see:!this.state.see})}},{key:"render",value:function(){var e=this.props,t=e.cost,a=e.offer,n=e.onClose,i=e.isSaler,l=this.state.see;return r.a.createElement("div",{className:"resultPage"},r.a.createElement("div",{className:"result iconfont icon-dui",onClick:this.handleIconClick.bind(this)}),r.a.createElement("div",{className:"item"},"\u60a8\u597d\uff0c\u6839\u636e\u60a8\u7684\u7ecf\u8425\u60c5\u51b5\uff0c\u62a5\u4ef7\u5982\u4e0b"),r.a.createElement("div",{className:"item"},r.a.createElement(B,{price:a})),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"see iconfont ".concat(l?"icon-ziyuan":"icon-ziyuan1")}),r.a.createElement("div",{className:"item",onClick:this.handleSeeClick.bind(this)},l&&"\u6218\u7565\u5ba2\u6237\u4f18\u60e0\u4ef7"),r.a.createElement("div",{className:"item",style:{alignItems:"flex-start"}},l&&r.a.createElement(B,{price:t}))),r.a.createElement(f.a,{size:"lg"}),r.a.createElement(u.a,null,r.a.createElement(d.a,{type:"primary",onClick:function(e){return n(e)}},"\u91cd\u65b0\u8be2\u4ef7")))}}]),a}(r.a.Component);function B(e){return r.a.createElement("span",{className:"price-label"},r.a.createElement("span",{className:"price"},e.price),"\u5143/\u6708")}var U=a(281),J=function(e){Object(z.a)(a,e);var t=Object(D.a)(a);function a(){var e;Object(N.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,codeDisabled:!1,codeBtnText:"\u83b7\u53d6\u9a8c\u8bc1\u7801",hasSendMsg:!1,priecs:{},showResult:!1,isSaler:!1,validPhone:!1},e.typeData=U.type.map((function(e){return{label:e.label,value:e}})),e.cityData=U.city.map((function(e){return{label:e.label,value:e}})),e}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),q.login().then(function(){var t=Object(C.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!1,validPhone:0===a.auth_mobile,isSaler:"sale"===a.type});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){S.a.fail(t),e.setState({loading:!1})}))}},{key:"submit",value:function(){var e=this;this.props.form.validateFields().then((function(t){console.log("form valid success",JSON.stringify(t));var a=function(e,t,a,n,r){var i=0,l=0,o=0,c=0,s=1,u=1;return!(e<50)&&(e<100?(i=(e/60*200+150)*(t/3*.15+.85)*(a/e/1700*.1+.9),s=1.18,u=1.25):e<200?(i=(e/170*300+300)*(t/3*.15+.85)*(a/e/1400*.1+.9),s=1.15,u=1.2):e<400?(i=(e/290*450+350)*(t/3*.15+.85)*(a/e/1300*.1+.9),s=1.15,u=1.2):e<800?(i=(e/550*800+350)*(t/3*.15+.85)*(a/e/1100*.1+.9),s=1.12,u=1.15):e<1400?(i=(e/1100*1300+500)*(t/3*.15+.85)*(a/e/1e3*.1+.9),s=1.1,u=1.12):e<2300?(i=(e/1800*1500+1e3)*(t/3*.15+.85)*(a/e/900*.1+.9),s=1.1,u=1.12):e<=3500&&(i=(e/2800*2300+1300)*(t/4*.15+.85)*(a/e/900*.1+.9),s=1.1,u=1.12),e>=400&&1.1===r&&(r=1.05),c=(o=(l=i*n*r)*s)*u,{floor:l.toFixed(0),cost:o.toFixed(0),offer:c.toFixed(0)})}(t.area,t.year_limit,t.mouth_sales_volume,t.category[0].value,t.city[0].value);e.setState({priecs:a}),t.min_reserve_price=a.floor,t.reserve_price=a.cost,t.offer_price=a.offer,t.city=t.city[0].label,t.category=t.category[0].label;var n=new FormData;Object.keys(t).map((function(e){n.append(e,t[e])})),e.setState({loading:!0}),function(e,t){return t=F(t),R(fetch("/api/webchat"+e,{method:"POST",mode:"cors",body:t}))}("/offer",n).then((function(t){e.setState({loading:!1}),e.showResult()}),(function(t){e.setState({loading:!1}),console.log(t),S.a.fail(t)}))}),(function(t){var a=t.errors;for(var n in a){S.a.fail(e.props.form.getFieldError(n)[0],1,null,!1);break}}))}},{key:"getCode",value:function(){var e=this;if(this.state.codeDisabled)return!1;var t=this.props.form.getFieldValue("mobile");t?(this.setState({codeDisabled:!0}),P("/smscode",{mobile:t}).then((function(){e.setState({hasSendMsg:!0});var t=60,a=setInterval((function(){if(0===t)return e.setState({codeBtnText:"\u91cd\u53d1\u9a8c\u8bc1",codeDisabled:!1}),void clearInterval(a);e.setState({codeBtnText:"".concat(t,"\u79d2\u540e\u91cd\u65b0\u83b7\u53d6")}),t--}),1e3);S.a.success("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001",1)}),(function(t){console.log(t),k.a.alert("",t),e.setState({codeDisabled:!1})}))):S.a.fail("\u8bf7\u8f93\u5165\u624b\u673a\u53f7",2,null,!1)}},{key:"showResult",value:function(){this.setState({showResult:!0})}},{key:"closeResult",value:function(){this.setState({showResult:!1})}},{key:"numberNormalize",value:function(e){var t,a=Number(e);return""===e||("number"!==typeof(t=a)||isNaN(t))?e:a}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldProps,a=this.state,n=a.showResult,i=a.priecs,l=a.isSaler,o=a.validPhone,s=a.loading;return r.a.createElement("form",{className:"mainPage"},r.a.createElement(g.a,{renderHeader:function(){return"\u5e97\u94fa\u4fe1\u606f"}},r.a.createElement(w.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u9762\u79ef"},t("area",{validateTrigger:"onBlur",normalize:function(t){return e.numberNormalize(t)},rules:[{required:!0,type:"number",min:50,max:3500,message:"\u9762\u79ef\u4e3a50\u52303500\u4e4b\u95f4\u7684\u6574\u6570"}]}),{extra:"\u5e73\u65b9\u7c73"}),"\u9762\u79ef"),r.a.createElement(w.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u5e74\u9650"},t("year_limit",{normalize:function(t){return e.numberNormalize(t)},rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5e74\u9650"}]}),{extra:"\u5e74"}),"\u5e74\u9650"),r.a.createElement(w.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u6708\u9500\u552e\u989d"},t("mouth_sales_volume",{normalize:function(t){return e.numberNormalize(t)},rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6708\u9500\u552e\u989d"}]}),{extra:"\u5143"}),"\u6708\u9500\u552e\u989d"),r.a.createElement(b.a,Object.assign({},t("category",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u54c1\u7c7b"}]}),{data:this.typeData,cols:1,title:"\u9009\u62e9\u54c1\u7c7b",extra:"\u8bf7\u9009\u62e9"}),r.a.createElement(g.a.Item,{arrow:"horizontal"},"\u9009\u62e9\u54c1\u7c7b")),r.a.createElement(b.a,Object.assign({},t("city",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u57ce\u5e02"}]}),{data:this.cityData,cols:1,title:"\u9009\u62e9\u57ce\u5e02",extra:"\u8bf7\u9009\u62e9"}),r.a.createElement(g.a.Item,{arrow:"horizontal"},"\u6240\u5728\u57ce\u5e02"))),o&&r.a.createElement(g.a,{renderHeader:function(){return"\u7528\u6237\u4fe1\u606f"}},r.a.createElement(w.a,Object.assign({maxLength:4,editable:!0,placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"},t("name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8054\u7cfb\u4eba"}]})),"\u8054\u7cfb\u4eba"),r.a.createElement(w.a,Object.assign({type:"number",maxLength:11,editable:!0,placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"},t("mobile",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u624b\u673a\u53f7"}]})),"\u624b\u673a\u53f7"),r.a.createElement(w.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"},t("code",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u9a8c\u8bc1\u7801"}]}),{extra:r.a.createElement("span",{className:"btn_code ".concat(this.state.codeDisabled&&"disabled"),onClick:this.getCode.bind(this)},this.state.codeBtnText)}),"\u9a8c\u8bc1\u7801")),r.a.createElement(f.a,{size:"xl"}),r.a.createElement(u.a,null,r.a.createElement(d.a,{type:"primary",onClick:this.submit.bind(this)},"\u67e5\u8be2")),n&&r.a.createElement(T,Object.assign({},i,{isSaler:!l,onClose:this.closeResult.bind(this)})),r.a.createElement(c.a,{toast:!0,text:"\u6b63\u5728\u52a0\u8f7d...",animating:s}))}}]),a}(r.a.Component),M=Object(I.a)()(J);var A=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[116,1,2]]]);
//# sourceMappingURL=main.2fdfe5a1.chunk.js.map