(this["webpackJsonpshop-price"]=this["webpackJsonpshop-price"]||[]).push([[0],{116:function(e,t,a){e.exports=a(282)},121:function(e,t,a){},200:function(e,t,a){},280:function(e,t,a){},281:function(e){e.exports=JSON.parse('{"city":[{"label":"\u897f\u5b89","value":1},{"label":"\u90d1\u5dde","value":1},{"label":"\u6210\u90fd","value":1.1}],"type":[{"label":"\u7efc\u5408\u81ea\u52a9\u9910","value":1.5},{"label":"\u590d\u6742\u53cc\u53a8\u623f\u7092\u83dc","value":1.2},{"label":"\u7f8e\u98df\u5e7f\u573a\uff08\u542b\u6863\u53e3\uff09","value":1.2},{"label":"\u70e4\u8089\u7efc\u5408","value":1.1},{"label":"\u7efc\u5408\u897f\u9910\u5385","value":1.1},{"label":"\u7092\u83dc","value":1},{"label":"\u725b\u6392\u81ea\u52a9","value":1},{"label":"\u706b\u9505\u7efc\u5408","value":0.9},{"label":"\u9762\u70b9\u5c0f\u5403\u7c7b\u7efc\u5408","value":0.9},{"label":"\u5355\u54c1\u4e2d\u9910","value":0.9},{"label":"\u7efc\u5408\u6027\u5bb4\u4f1a\u9910\u996e","value":0.9},{"label":"\u70e4\u8089\u5355\u54c1","value":0.8},{"label":"\u9762\u70b9\u5c0f\u5403\u7c7b\u5355\u54c1","value":0.8},{"label":"\u897f\u5f0f\u5feb\u9910","value":0.8},{"label":"\u7f8e\u98df\u5e7f\u573a\uff08\u4e0d\u542b\u6863\u53e3\uff09","value":0.8},{"label":"\u519c\u5bb6\u4e50","value":0.8},{"label":"\u706b\u9505\u5355\u54c1","value":0.7},{"label":"\u56e2\u9910\uff08\u5355\u4f4d\u5b66\u6821\u9910\u5385\uff09","value":0.7},{"label":"\u8336\u697c\u5496\u5561\u7b80\u9910","value":0.7},{"label":"\u7eaf\u5bb4\u4f1a\u5385","value":0.6}]}')},282:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),s=(a(121),a(122),a(110)),o=a.n(s),c=(a(92),a(45)),u=a.n(c),m=(a(93),a(46)),d=a.n(m),h=(a(96),a(47)),p=a.n(h),b=(a(168),a(80)),v=a.n(b),f=(a(102),a(32)),g=a.n(f),y=(a(185),a(21)),E=a.n(y),w=(a(104),a(49)),k=a.n(w),x=(a(197),a(56)),S=a.n(x),O=a(27),C=a.n(O),j=a(51),N=a(52),z=a(53),D=a(55),q=a(54),I=(a(200),a(115));var T="https://www.fastmock.site/mock/0834d4826d5be6de92173193ca42e1b9";function R(e,t){return fetch(T+e,{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()}))}a(280);var F=function(e){Object(D.a)(a,e);var t=Object(q.a)(a);function a(){var e;Object(N.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={see:!1},e.clickCounter=0,e.timer=void 0,e}return Object(z.a)(a,[{key:"handleIconClick",value:function(){var e=this;this.props.isSaler&&(this.clickCounter++,this.clickCounter>=3?k.a.alert("\u6210\u4ea4\u5e95\u4ef7",this.props.floor+"\u5143/\u6708"):this.timer=setTimeout((function(){clearTimeout(e.timer),e.clickCounter=0}),500))}},{key:"handleSeeClick",value:function(){this.setState({see:!this.state.see})}},{key:"render",value:function(){var e=this.props,t=e.cost,a=e.offer,n=e.onClose,l=e.isSaler,i=this.state.see;return r.a.createElement("div",{className:"resultPage"},r.a.createElement("div",{className:"result iconfont icon-dui",onClick:this.handleIconClick.bind(this)}),r.a.createElement("div",{className:"item"},"\u60a8\u597d\uff0c\u6839\u636e\u60a8\u7684\u7ecf\u8425\u60c5\u51b5\uff0c\u62a5\u4ef7\u5982\u4e0b"),r.a.createElement("div",{className:"item"},r.a.createElement(B,{price:a})),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"item",onClick:this.handleSeeClick.bind(this)},"\u6218\u7565\u5ba2\u6237\u4f18\u60e0\u4ef7",r.a.createElement("i",{className:"see iconfont ".concat(i?"icon-ziyuan":"icon-ziyuan1")})),r.a.createElement("div",{className:"item"},i&&r.a.createElement(B,{price:t}))),r.a.createElement(p.a,{size:"lg"}),r.a.createElement(u.a,null,r.a.createElement(d.a,{type:"primary",onClick:function(e){return n(e)}},"\u91cd\u65b0\u8be2\u4ef7")))}}]),a}(r.a.Component);function B(e){return r.a.createElement("span",{className:"price-label"},r.a.createElement("span",{className:"price"},e.price),"\u5143/\u6708")}var P={login:function(){var e=this.getQueryVariable("code"),t=window.location.href;if(null!=e&&""!==e)return this.getUserInfo(e);var a=encodeURIComponent(t);window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat("","&redirect_uri=").concat(a,"&response_type=code&scope=snsapi_base&state=#wechat_redirect")},getUserInfo:function(e){return Object(j.a)(C.a.mark((function t(){var a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R("/api/login",{code:e});case 3:return a=t.sent,t.abrupt("return",a);case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getQueryVariable:function(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]===e)return n[1]}return!1}},_=a(281),J=function(e){Object(D.a)(a,e);var t=Object(q.a)(a);function a(){var e;Object(N.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,codeDisabled:!1,codeBtnText:"\u83b7\u53d6\u9a8c\u8bc1\u7801",hasSendMsg:!1,priecs:{},showResult:!1,isSaler:!1,validPhone:!1},e.typeData=_.type.map((function(e){return{label:e.label,value:e}})),e.cityData=_.city.map((function(e){return{label:e.label,value:e}})),e}return Object(z.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.login().then(function(){var t=Object(j.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!1,validPhone:0===a.type,isSaler:1===a.type});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"submit",value:function(){var e=this;this.props.form.validateFields().then((function(t){var a=function(e,t,a,n,r){var l=0,i=0,s=0,o=0,c=1,u=1;return!(e<50)&&(e<100&&(l=(e/50*200+100)*(t/3*.15+.85)*(a/e/1500*.1+.9),c=1.18,u=1.25),e<200&&(l=(e/150*300+270)*(t/3*.15+.85)*(a/e/1300*.15+.85),c=1.15,u=1.2),e<400&&(l=(e/300*530+280)*(t/3*.15+.85)*(a/e/1200*.15+.85),c=1.15,u=1.2),e<800&&(l=(e/600*900+350)*(t/3*.15+.85)*(a/e/1e3*.05+.95),c=1.15,u=1.2),e<1400&&(l=(e/1100*1400+500)*(t/3*.15+.85)*(a/e/900*.15+.85),c=1.12,u=1.2),e<2300&&(l=(e/1900*2200+600)*(t/3*.15+.85)*(a/e/700*.15+.85),c=1.12,u=1.2),e<=3500&&(l=(e/2800*3e3+800)*(t/4*.15+.85)*(a/e/700*.15+.85),c=1.12,u=1.2),o=(s=(i=l*n*r)*c)*u,{floor:i.toFixed(0),cost:s.toFixed(0),offer:o.toFixed(0)})}(t.area,t.year,t.sales,t.shopType[0].value,t.city[0].value);e.setState({priecs:a}),R("/api/submit",a).then((function(t){e.showResult()}),(function(e){console.log(e)}))}),(function(t){var a=t.errors;for(var n in a){S.a.fail(e.props.form.getFieldError(n)[0],1,null,!1);break}}))}},{key:"getCode",value:function(){var e=this;if(this.state.codeDisabled)return!1;this.props.form.getFieldValue("phone")?(this.setState({codeDisabled:!0}),R("/api/getCode",{mobile:this.state.phone}).then((function(){e.setState({hasSendMsg:!0});var t=10,a=setInterval((function(){if(0===t)return e.setState({codeBtnText:"\u91cd\u53d1\u9a8c\u8bc1",codeDisabled:!1}),void clearInterval(a);e.setState({codeBtnText:"".concat(t,"\u79d2\u540e\u91cd\u65b0\u83b7\u53d6")}),t--}),1e3);S.a.success("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001",1)}),(function(t){console.log(t),k.a.alert("",t.error),e.setState({codeDisabled:!1})}))):S.a.fail("\u8bf7\u8f93\u5165\u624b\u673a\u53f7",2,null,!1)}},{key:"showResult",value:function(){this.setState({showResult:!0})}},{key:"closeResult",value:function(){this.setState({showResult:!1})}},{key:"numberNormalize",value:function(e){var t,a=Number(e);return""===e||("number"!==typeof(t=a)||isNaN(t))?e:a}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldProps,a=this.state,n=a.showResult,l=a.priecs,i=a.isSaler,s=a.validPhone,c=a.loading;return r.a.createElement("form",{className:"mainPage"},r.a.createElement(g.a,{renderHeader:function(){return"\u5e97\u94fa\u4fe1\u606f"}},r.a.createElement(E.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u9762\u79ef"},t("area",{validateTrigger:"onBlur",normalize:function(t){return e.numberNormalize(t)},rules:[{required:!0,type:"number",min:50,max:3500,message:"\u9762\u79ef\u4e3a50\u52303500\u4e4b\u95f4\u7684\u6574\u6570"}]}),{extra:"\u5e73\u65b9\u7c73"}),"\u9762\u79ef"),r.a.createElement(E.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u5e74\u9650"},t("year",{normalize:function(t){return e.numberNormalize(t)},rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5e74\u9650"}]}),{extra:"\u5e74"}),"\u5e74\u9650"),r.a.createElement(E.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u6708\u9500\u552e\u989d"},t("sales",{normalize:function(t){return e.numberNormalize(t)},rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6708\u9500\u552e\u989d"}]}),{extra:"\u4e07"}),"\u6708\u9500\u552e\u989d"),r.a.createElement(v.a,Object.assign({},t("shopType",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u54c1\u7c7b"}]}),{data:this.typeData,cols:1,title:"\u9009\u62e9\u54c1\u7c7b",extra:"\u8bf7\u9009\u62e9"}),r.a.createElement(g.a.Item,{arrow:"horizontal"},"\u9009\u62e9\u54c1\u7c7b")),r.a.createElement(v.a,Object.assign({},t("city",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u57ce\u5e02"}]}),{data:this.cityData,cols:1,title:"\u9009\u62e9\u57ce\u5e02",extra:"\u8bf7\u9009\u62e9"}),r.a.createElement(g.a.Item,{arrow:"horizontal"},"\u6240\u5728\u57ce\u5e02"))),s&&r.a.createElement(g.a,{renderHeader:function(){return"\u7528\u6237\u4fe1\u606f"}},r.a.createElement(E.a,Object.assign({maxLength:4,editable:!0,placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba"},t("name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8054\u7cfb\u4eba"}]})),"\u8054\u7cfb\u4eba"),r.a.createElement(E.a,Object.assign({type:"number",maxLength:11,editable:!0,placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"},t("phone",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u624b\u673a\u53f7"}]})),"\u624b\u673a\u53f7"),r.a.createElement(E.a,Object.assign({type:"number",editable:!0,placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"},t("smsCode",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u9a8c\u8bc1\u7801"}]}),{extra:r.a.createElement("span",{className:"btn_code ".concat(this.state.codeDisabled&&"disabled"),onClick:this.getCode.bind(this)},this.state.codeBtnText)}),"\u9a8c\u8bc1\u7801")),r.a.createElement(p.a,{size:"xl"}),r.a.createElement(u.a,null,r.a.createElement(d.a,{type:"primary",onClick:this.submit.bind(this)},"\u67e5\u8be2")),n&&r.a.createElement(F,Object.assign({},l,{isSaler:i,onClose:this.closeResult.bind(this)})),r.a.createElement(o.a,{toast:!0,text:"\u6b63\u5728\u52a0\u8f7d...",animating:c}))}}]),a}(r.a.Component),M=Object(I.a)()(J);var A=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[116,1,2]]]);
//# sourceMappingURL=main.6ab8e1d8.chunk.js.map